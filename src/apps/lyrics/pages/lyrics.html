{% extends "templates/app.html" %}
{% block head %}
<style>
    #lyrics {
        text-align: center;
        font-size: 20px;
        transition: transform 500ms;
        transform: translateY(50vh);
        width: calc(100% - 50px);
        padding-left: 25px;
        display: flex;
        flex-direction: column;
    }
    .lyric {
        transition: font-weight 500ms;
        padding-bottom: 10px;
    }
    .lyric.current {
        font-weight: bold;
    }
</style>
{% endblock %}
{% block content %}
<div id="lyrics">
</div>
{% endblock %}
{% block script %}
<script>
    let automove = true;
    let lyrics = [];
    const lyricsInner = document.getElementById("lyrics")
    on("lyrics", (lyr) => {
        lyricsInner.innerHTML = '';
        automove = true;
        lyrics = []
        if (lyr != null) {
            lyr.forEach(rd => {
                let line = rd
                var span = document.createElement("span")
                if (typeof line === 'string') {
                    automove = false;
                } else {
                    line = line[1]
                    lyrics.push([rd[0], line])
                }
                if (line == '') {
                    line = 'â™¬';
                }
                span.classList = ['lyric']
                span.textContent = line
                lyricsInner.appendChild(span)
            });
        }
    })
    send("open", 0)
</script>
{% endblock %}